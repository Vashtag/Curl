:root{--bg:#071010;--panel:#132020;--fg:#bfffd8;--edge:#2e6;--muted:#7fb}
*{box-sizing:border-box}
body{margin:0;background:#020606;color:var(--fg);font-family:monospace}
#app{min-height:100vh;padding:8px;position:relative}
.topbar{display:flex;justify-content:space-between;padding:8px;border:1px solid #295;background:#101818}
.screen{display:none}
.screen.active{display:flex}
#screenMatch{gap:8px}
.board-wrap{display:flex;flex-direction:column;gap:8px}
canvas{border:1px solid #295;background:#eef8ff}
.controls{display:flex;gap:12px;align-items:center;padding:8px;border:1px solid #295;background:var(--panel)}
.sidebar{width:300px;display:flex;flex-direction:column;gap:8px}
.panel{border:1px solid #295;background:var(--panel);padding:8px}
.panel h3{margin:0 0 6px;color:#7fff9f}
.meter{width:220px;height:12px;background:#233;border:1px solid #355}
#powerFill,#staminaFill{height:100%}
#powerFill{background:linear-gradient(90deg,#9df,#fff);width:0%}
#staminaFill{background:linear-gradient(90deg,#ff6,#6f6);width:100%}
.cards{display:flex;flex-wrap:wrap;gap:10px}
.card{border:1px solid #4a7;background:#102525;padding:10px;width:260px;cursor:pointer;min-height:120px}
.card:hover{outline:1px solid #8fa}
button{background:#174;color:#dff;border:1px solid #7db;padding:6px 8px;font-family:monospace;cursor:pointer}
#nodeMap{display:grid;grid-template-columns:repeat(6,1fr);gap:4px}
.node{border:1px solid #355;text-align:center;padding:3px 0}
.node.cur{background:#264;color:white}
.node.done{opacity:.5}
#log{max-height:180px;overflow:auto;font-size:12px}
.logline{padding:2px 0;border-bottom:1px dotted #355}
.flow{flex-direction:column;gap:8px;padding:16px}
.crt::before{content:"";position:fixed;inset:0;pointer-events:none;background:repeating-linear-gradient(0deg,rgba(255,255,255,.03),rgba(255,255,255,.03) 1px,transparent 1px,transparent 3px)}
.crt::after{content:"";position:fixed;inset:0;pointer-events:none;background-image:radial-gradient(rgba(255,255,255,.06) 1px,transparent 1px);background-size:3px 3px;opacity:.2}
